<config xmlns="http://tail-f.com/ns/config/1.0">
  <devices xmlns="http://tail-f.com/ns/ncs">
  <device>
      <name>{/device}</name>
      <config>
      <policy-map xmlns="urn:ios">
          <name>{/../../../vrf}_{/shaper_size}__{/DSCP-BUSINESS-OUT/bandwidth}_{/DSCP-STANDARD-OUT/bandwidth}_{/DSCP-VOICE-OUT/bandwidth}_{/DSCP-VIDEO-OUT/bandwidth}_{/DSCP-INTERACTIVE-OUT/bandwidth}_{/../solution_id}</name>
        <class when="{starts-with($b_bandwidth, 'true')}" >
            <name>DSCP-BUSINESS-OUT</name>
            <bandwidth>
                <percent>{/DSCP-BUSINESS-OUT/bandwidth}</percent>
            </bandwidth>
        </class>
        <class when="{starts-with($s_bandwidth, 'true')}" >
            <name>DSCP-STANDARD-OUT</name>
            <bandwidth>
                <percent>{/DSCP-STANDARD-OUT/bandwidth}</percent>
            </bandwidth>
        </class>
        <class when="{starts-with($vo_bandwidth, 'true')}" >
            <name>DSCP-VOICE-OUT</name>
            <priority>
                <percent>{/DSCP-VOICE-OUT/bandwidth}</percent>
            </priority>
        </class>
        <class when="{starts-with($vi_bandwidth, 'true')}" >
            <name>DSCP-VIDEO-OUT</name>
            <bandwidth>
                <percent>{/DSCP-VIDEO-OUT/bandwidth}</percent>
            </bandwidth>
        </class>
        <class when="{starts-with($i_bandwidth, 'true')}" >
            <name>DSCP-INTERACTIVE-OUT</name>
            <bandwidth>
                <percent>{/DSCP-INTERACTIVE-OUT/bandwidth}</percent>
            </bandwidth>
        </class>

      </policy-map>
      </config>
  </device>
  </devices>
</config>
